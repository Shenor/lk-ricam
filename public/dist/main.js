!function(t){var e={};function n(o){if(e[o])return e[o].exports;var l=e[o]={i:o,l:!1,exports:{}};return t[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)n.d(o,l,function(e){return t[e]}.bind(null,l));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports=class{constructor(){this.url="http://localhost:3000"}editClient(t){return new Promise((e,n)=>{$.ajax({type:"POST",url:this.url+"/edit",crossDomian:!0,data:t}).done(t=>{e(t)}).fail(t=>{n(t)})})}deleteClient(t){return new Promise((e,n)=>{$.ajax({type:"POST",url:this.url+"/delete",crossDomian:!0,data:{data:t}}).done(t=>{e(t)}).fail(t=>{n(t)})})}getAll(){return new Promise((t,e)=>{$.ajax({type:"POST",url:this.url+"/database",crossDomian:!0}).done(e=>{t(e)}).fail(t=>{e(t)})})}}},function(t,e,n){"use strict";n.r(e);var o=n(0),l=n.n(o);M.Tabs.init(document.querySelectorAll(".tabs")),M.Modal.init(document.querySelectorAll(".modal")),M.FloatingActionButton.init(document.querySelectorAll(".fixed-action-btn")),M.Collapsible.init(document.querySelectorAll(".collapsible.expandable"),{accordion:!1}),M.FormSelect.init(document.querySelector("#contractStatus")),$("#main-select").on("change",function(){location.href=`/user/${$("#main-select").val()}`}),document.addEventListener("DOMContentLoaded",function(){const t=new l.a;function e(t,e,n){var o,l=t.tBodies[0],r=Array.prototype.slice.call(l.rows,0);for(n=-(+n||-1),r=r.sort(function(t,o){return n*t.cells[e].textContent.trim().localeCompare(o.cells[e].textContent.trim())}),o=0;o<r.length;++o)l.appendChild(r[o])}function n(t){var n,o=t.tHead;if(o&&(o=o.rows[0])&&(o=o.cells),o)for(n=o.length;--n>=0;)!function(n){var l=1;o[n].addEventListener("click",function(){e(t,n,l=1-l)})}(n)}!async function(){!function(t){var e=(t=t||document.body).getElementsByTagName("table"),o=e.length;for(;--o>=0;)n(e[o])}();const e=await t.getAll(),o=document.querySelector("#name"),l=await M.Chips.init(document.querySelectorAll(".chips"),{autocompleteOptions:{data:function(t){const e={};return t.map(t=>{e[`${t.name}`]=null}),e}(e),limit:1/0,minLength:1}});e.sort((t,e)=>t.name>e.name?1:-1).map(t=>{o.value===t.name?$("#main-select").append($(`<option value = ${t._id} selected >${t.name}</option>`)):$("#main-select").append($(`<option value = ${t._id}>${t.name}</option>`))}),$(".avatar").click(()=>{$("#inp_file").click()}),$("#inp_file").on("change",()=>{console.log($(this))}),function(t,e){$("#delete").click(async()=>{const n=[];await e[0].chipsData.map(t=>{n.push(t.tag)}),t.deleteClient(n).then(M.toast({html:`${n} были удалены!`,displayLength:2300,completeCallback:()=>{window.location="/"}})).catch(t=>console.log(t))})}(t,l),function(t){$("#save").click(async()=>{let e={id:document.querySelector("#id").value,name:document.querySelector("#name").value,legalAdress:document.querySelector("#legalAdress").value,actualAdress:document.querySelector("#actualAdress").value,versionIiko:document.querySelector("#versionIiko").value,contractStatus:$("#contractStatus").val(),contact:[],connect:[],fiscal:[],ofd:[],barcodeScanner:[],moneyBox:[],switchboard:[],monoBlock:[],printer:[],libra:[]};$("#table-contacts tr").each((t,n)=>{let o=t;e.contact[t]=[],$(n).children("td").each((t,n)=>{e.contact[o].push($(n).html())})}),$("#table-connect tr").each((t,n)=>{let o=t;e.connect[t]=[],$(n).children("td").each((t,n)=>{e.connect[o].push($(n).html())})}),$("#table-fiscal tr").each((t,n)=>{e.fiscal[t]={fiscalRegistr:{},fiscalDrive:{}},e.fiscal[t].fiscalRegistr.fiscalOfd=$(n).children("td")[0].textContent,e.fiscal[t].fiscalRegistr.fiscalModel=$(n).children("td")[1].textContent,e.fiscal[t].fiscalRegistr.fiscalSN=$(n).children("td")[2].textContent,e.fiscal[t].fiscalDrive.fiscalTime=$(n).children("td")[3].textContent,e.fiscal[t].fiscalDrive.fiscalSN=$(n).children("td")[4].textContent,e.fiscal[t].fiscalDrive.fiscalDate=$(n).children("td")[5].textContent}),$("#table-ofd tr").each((t,n)=>{e.ofd[t]={},e.ofd[t].ofdkass=$(n).children("td")[0].textContent,e.ofd[t].addressOfd=$(n).children("td")[1].textContent,e.ofd[t].ofdLogin=$(n).children("td")[2].textContent,e.ofd[t].ofdPassword=$(n).children("td")[3].textContent,e.ofd[t].ofdTerm=$(n).children("td")[4].textContent,e.ofd[t].ofdTime=$(n).children("td")[5].textContent}),$("#table-switchboard tr").each((t,n)=>{e.switchboard[t]={},e.switchboard[t].login=$(n).children("td")[0].textContent,e.switchboard[t].password=$(n).children("td")[1].textContent,e.switchboard[t].model=$(n).children("td")[2].textContent,e.switchboard[t].location=$(n).children("td")[4].textContent,e.switchboard[t].notes=$(n).children("td")[4].textContent}),$("#table-monoBlock tr").each((t,n)=>{e.monoBlock[t]={},e.monoBlock[t].model=$(n).children("td")[0].textContent,e.monoBlock[t].monoBlockSN=$(n).children("td")[1].textContent,e.monoBlock[t].hardDrive=$(n).children("td")[2].textContent,e.monoBlock[t].state=$(n).children("td")[3].textContent,e.monoBlock[t].notes=$(n).children("td")[4].textContent}),$("#table-moneyBox tr").each((t,n)=>{e.moneyBox[t]={},e.moneyBox[t].moneyBoxModel=$(n).children("td")[0].textContent,e.moneyBox[t].moneyBoxNumber=$(n).children("td")[1].textContent}),$("#table-barcodeScanner tr").each((t,n)=>{e.barcodeScanner[t]={},e.barcodeScanner[t].scannerModel=$(n).children("td")[0].textContent,e.barcodeScanner[t].scannerNumber=$(n).children("td")[1].textContent}),$("#table-printer tr").each((t,n)=>{e.printer[t]={},e.printer[t].printerModel=$(n).children("td")[0].textContent,e.printer[t].printerNumber=$(n).children("td")[1].textContent,e.printer[t].printerConnectionType=$(n).children("td")[2].textContent}),$("#table-libra tr").each((t,n)=>{e.libra[t]={},e.libra[t].libraModel=$(n).children("td")[0].textContent,e.libra[t].libraNumber=$(n).children("td")[1].textContent,e.libra[t].libraConnectionType=$(n).children("td")[2].textContent}),t.editClient(e).then(t=>{console.log(t),M.toast({html:"Данные успешно сохранены!",displayLength:2300,completeCallback:()=>{location.href=`/user/${t._id}`}})})})}(t)}()})}]);